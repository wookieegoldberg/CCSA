
@PART[*]:HAS[#engineType[Merlin1]]:AFTER[RealismOverhaulEngines]:AFTER[RP-0]
{		
	@MODULE[ModuleEngineConfigs]
	{
		
		+CONFIG[Merlin1D]
		{
			@name = Raptor
			@minThrust = 659.4 // 20% throttle
			@maxThrust = 3297
			@heatProduction = 282
			%MassMult = 2.1
				
			@PROPELLANT[Kerosene]
			{
				@name = LqdMethane
				@ratio = 0.4137
			}
			@PROPELLANT[LqdOxygen]
			{
				@ratio = 0.5863
			}
			@atmosphereCurve
			{
				@key,0 = 0 361
				@key,1 = 1 334
			}
			
			//@ullage = True
			@ignitions = 5
			!IGNITOR_RESOURCE,* {}
			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 0.500
			}

			%cost = 7925
			%entryCost = 750000
			%techRequired = stagedTL8
			%maxSubtraction = 500000
			@entryCostSubtractors
			{
				RaptorVacuum = 500000
			}

		}

		+CONFIG[Raptor]
		{
			@name = RaptorVacuum
			@minThrust = 700 // 20% throttle
			@maxThrust = 3500
			@MassMult = 2.3
				
			@atmosphereCurve
			{
				@key,0 = 0 382
				@key,1 = 1 280
			}

			@ignitions = 0
			
			@cost = 8425

			@entryCostSubtractors
			{
				Raptor = 500000
			}

		}
	}
}

@PART[*]:HAS[@MODULE[ModuleEngineConfigs]:HAS[@CONFIG[Raptor]],!MODULE[TestFlightInterop]]:BEFORE[zTestFlight]:AFTER[RealismOverhaulEngines]
{
	TESTFLIGHT
	{
		name = Raptor
		ratedBurnTime = 600
		ignitionReliabilityStart = 0.8
		ignitionReliabilityEnd = 0.975
		cycleReliabilityStart = 0.75
		cycleReliabilityEnd = 0.9995
	}
}

@PART[*]:HAS[@MODULE[ModuleEngineConfigs]:HAS[@CONFIG[RaptorVacuum]],!MODULE[TestFlightInterop]]:BEFORE[zTestFlight]:AFTER[RealismOverhaulEngines]
{
	TESTFLIGHT
	{
		name = RaptorVacuum
		ratedBurnTime = 600
		ignitionReliabilityStart = 0.8
		ignitionReliabilityEnd = 0.975
		cycleReliabilityStart = 0.75
		cycleReliabilityEnd = 0.9995
	}
}

@TechTree:AFTER[RP-0]
{
	@RDNode:HAS[#id[stagedTL5]]
	{
		@pos = -1118,1520,-1
	}
	@RDNode:HAS[#id[stagedTL6]]
	{
		@pos = -927,1520,-1
	}
	@RDNode:HAS[#id[stagedTL7]]
	{
		@pos = -736,1520,-1
	}
	RDNode
	{
		nodeName = rp0_node9_stagedTL8
		id = stagedTL8
		title = Full-Flow Staged Combustion
		description = The latest advancement in staged-flow combustion, with a fuel-rich preburner and an oxidizer-rich preburner powering separate turbopumps.
		cost = 3000
		icon = RDicon_fuelSystems
		anyToUnlock = False
		hideEmpty = False
		scale = 0.6
		pos = -545,1520,-1
		Parent
		{
			parentID = stagedTL7
			lineFrom = RIGHT
			lineTo = LEFT
		}
	}
}